# 6월 9일

## AWS MySQL Free Tier 설치
- 데이터베이스의 한 종류
- RDBS / NoSQL 중 RDBS에 해당
- 중요한 정보를 저장할때 쓰임
- 여러 단계중 한 단계에서 오류가 나면 원상복구를 할 수 있음

### MySQL Free Tier 설치
#### 설치 과정
- AWS 콘솔 홈 접속
- 서비스탭의 데이터베이스 탭 -> RDS 클릭
- 지역(rigion)은 서울로 설정 해 주어야 함
- 데이터베이스 생성 버튼 클릭
- MySQL 선택
- 인스턴스 식별자는 원하는 대로 적으면 됨
- 자격증명탭이 중요하다
- 자격증명 탭의 마스터 사용자이름과 마스터 암호는 데이터베이스에 접속할때 쓰이기 때문에 잃어버리면 접속 할 수 없으므로 잘 적어두어야 한다.
- 그 밖의 인스턴스구성, 스토리지, 보안그룹은 건드리지 말자
- 중간의 연결 탭에 퍼블릭액세서 -> '예' 로 선택하기
- 데이터베이스 인증 탭 -> 암호인증 선택
- 데이터베이스 생성 클릭

### MySWQL WorkBench 설치
- 데이터베이스에 접속 할 수 있는 프로그램
- 구글에 검색 후 홈페이지에서 다운로드
- 회원가입 하라는 선택지 안해도 되고 밑에 작은글씨로 No Thanks, just download 클릭해서 다운로드
- 다운로드 한 후 실행했는데 비주얼C++2019 설치하라고 뜨면서 실행이 안된다면 비주얼C++2019을 설치 한 후 재실행
- 비주얼C++2019 설치 페이지: https://learn.microsoft.com/ko-KR/cpp/windows/latest-supported-vc-redist?view=msvc-170#visual-studio-2015-2017-2019-and-2022
- 위 페이지에서 2019 64bit 버전을 다운받아 설치해주면 된다
- 설치를 다 하고 난 뒤 다시 MySWQL WorkBench 다운받은 파일 실행해서 설치해주면 되고, 따로 설정 건들 것 없이 '다음'버튼 눌러서 설치를 마친다
- 설치를 마친 후 MySWQL WorkBench를 실행하고 설정을 바꾼다

#### MySWQL WorkBench 의 설정 바꾸기
-  MySWQL WorkBench 실행
-  MySWQL connection 옆의 플러스 버튼 누르기
-  정보를 적어줘야 함
   - 커넥션네임 : 내 데이터베이스의 이름 yhdb
   - 커넥션 메소드 : 스탠다드. 건드릴 필요 없음
   - 호스트네임 : 내 AWS RDS의 데이터베이스 엔드포인트 주소 카피해서 가져오기
   - 포스트번호 그대로
   - 유저네임은 마스터네임
   - 패스워드 : 스토어를 누르면 비번을 저장해놓고 쓸 수 있음. 마스터암호 집어넣기
   - 테스트커넥션을 눌러서 성공하면 그대로 ok버튼 눌러서 저장
   - 안되면 방화벽을 점검해봐야 함
   - 방화벽 규칙 추가 후 다시 테스트 커넥션 해보기
   - 접속되면 성공

##### 방화벽 설정하기
- AWS의 RDS탭 -> 연결 보안탭 -> 보안그룹 클릭 -> 인바운드 규칙 클릭 -> 인바운드 규칙 편집 -> 규칙 추가
- 규칙 추가하기
    - 사용자 TCP 드롭박스에서 MySQL/Aurora 선택
    - Anywhere IPv4 선택
    - 규칙 저장


## MySWQL WorkBench 사용하기
### 데이터베이스 설명
- 데이터베이스의 기본단위 : 테이블
- 데이터는 행과 열로 되어있고 데이터를 추가하는건 행을 추가하는것이다.
- 인덱스는 없음(데이터프레임과 다른점)
- 인덱스처럼 사용할 수 있는 컬럼을 만들어줘야함
- 맨 위 행을 컬럼이라고 함(컬럼명이 맨 위에 있음. CSV 파일처럼)
- 데이터베이스는 많은 테이블로 이루어져있음
- 모든 서비스는 회원이라는 테이블이 있음
- 결제관련 테이블도 있음, 상품테이블, ...
- 테이블간 관계가 생김
- 이런 것을 관계형 데이터베이스(RDBMS)라고 함
- 테이블을 만들 줄 알고, 수정, 가져올 줄 알아야 한다 -->> 우리가 배울것
- 테이블을 만드는것 : 테이블을 설계한다 라고 함
- 데이터타입에서 여러 타입이 있는 이유 : 저장 용량이 다름
   (구분하는 기준 : 데이터 저장 용량에 따라 나눠놈.)
- 데이터타입이 숫자라면 : 각 숫자길이 저장 허용범위가 있음 
		         (mysql int 범위)라고 검색하면 나옴
- 테이블을 만드는 이유는 데이터를 저장하기 위해서!

### 데이터베이스 만들기
- 참고) 원통형기둥 모양 : 데이터베이스를 의미하는 널리 쓰이는 아이콘 
- 원통형 기둥모양 아이콘을 누르면 데이터베이스를 생성할 수 있다.
- charset 첫번째 버튼(왼) : utf8로 설정
- charset 두번째 버튼(오) : utf8-unicode-ci  

#### 테이블 만들기
- 왼쪽 스키마탭에서 만든 데이터베이스를 선택한 후 드롭메뉴에서 테이블즈 선택
- 마우스 오른쪽버튼을 눌러 크리에이트 테이블을 선택
- 컬럼이름, 데이터타입 등을 적고 적용될 특성(체크박스)을 선택한 뒤
- 코멘트를 적을수도 있으니 필요하면 적는다
- 어플라이 버튼 누름
- 만약, 만들어논 테이블의 설정을 바꾸고싶다면
- 테이블에 마우스를 올리면 나오는 스패너 버튼을 클릭하거나
- 테이블 이름에 오른쪽버튼을 클릭하면 나오는 alter table 메뉴를 누른다

##### 체크박스 설명
   - PK 프라이머리키 : 가장 중요한 키 라는 뜻. 유니크한 값으로 처리하겠다
   - NN 낫 널 : NULL이 될 수 없다 -> 체크하면 그 컬럼은 널이 될 수 없다
   - UN unsigned : 부호가 없다 -> 음수(마이너스)가 없다
   - AI auto increment : 자동증가

## MySWQL WorkBench 기본 문법
- CRUD 라고 부름. create, read, update, delete 의 약자
- insert
- select
- update
- delete

### 데이터 가져오기
```
# 전체 데이터를 가져오기
SELECT *           # * : 모든 컬럼을 가져와라
FROM yhdb.cats3;   # yhdb 라는 데이터베이스에서 cats3 라는 테이블의

# 1. 고양이 이름이 jackson인 고양이의 데이터를 가져오시오
select *                # 모든 컬럼 가져와라
from cats3              # cats3 테이블에서
where name = 'Jackson'; # 조건을 써준다 : 이름 컬럼에 잭슨이라고 들어있는 데이터

# 2. 고양이 이름이 jackson인 고양이의 이름과 나이를 가져오시오
select name, age        # 전체 컬럼이 아닌 특정 컬럼만 가져올때 -> 콤마를 씀
from cats3
where name = 'Jackson';
```

### 데이터를 수정하기
```
# 8. breed가 Coon 인 고양이의 나이를 10으로 바꿔라
update cats3            # cats3 테이블의
set age = 10            # age컬럼을 10으로 바꿔라
where breed = 'Coon';   # 조건 : breed 컬럼이 Coon인 행만 선택


# 10. 고양이의 breed가 Tabby인 고양이의 이름은 Hello, 나이는 3으로 변경하기
update cats3                    # cats3 테이블의
set name = 'Hello', age = 3     # name컬럼을 Hello, age컬럼을 3으로 바꿔라
where breed = 'Tabby';          # 조건 : breed 컬럼이 Tabby인 행만 선택
```

### 데이터 삭제하기
```
# 1. 이름이 Egg인 고양이 데이터를 삭제하시오
delete from cats3       # cats3 테이블의
where name = 'Egg';     # name 컬럼이 Egg 인 행을 삭제해라

# 2. 전체 데이터 삭제하기 --> 보통 잘 안한다.
delete from cats3;
```

##### (참고)
- 테이블을 새로 만들어서 데이터를 인서트했는데 이걸 전부 삭제하고 다시 인서트하면 앞의 데이터 수 만큼 아이디 숫자가 뒤로 밀림
- 뒤로 밀리는 이유 : 회원탈퇴했다고 아이디 빈곳 채워넣으면 전 회원이 썼던거 새 회원이 볼 수 있는 불상사가 생길 수 있음
- 하지만 삭제해도 아이디 1번부터 나오도록 하고싶다면 다음을 바꾸면 됨.
- 테이블설정창 -> 밑의 옵션 탭 -> 제너럴 옵션 -> 오토 인크리먼트 : 1 로 수정하기

### 문자열 문법 1

1. concat() : 합치기 함수
- f(first) 네임과, l(last)네임이 분리되어있는데, 합해서 full_name으로 가져오고싶을때
- concat 함수를 사용

- 예시
    ```
    select concat( author_fname, author_lname) as full_name
        # 규칙 : 공백 없이 합쳐짐, 쓴 그대로 컬럼이름으로 써짐(컬럼이름 쓰는 자리니까)
        # as full_name : 컬럼 이름을 풀네임으로 하겠다
        # 공백으로 놔두고싶으면 ' ' 로 써야함(따옴표로 한칸 띄고 묶어줌)
    from books;

    select concat( author_fname,' ', author_lname) as full_name
        # concat은 , 를 써서 여러개를 연결 할 수 있다
    from books;
    ```

- concat_ws() : 합칠떄 자동으로 띄어쓰기 넣어주기
    ```
    select concat_ws( ' ', author_fname, author_lname)
    # 연결자를 맨 앞에 써주면 그걸 연결할때 자동으로 써서 합쳐줌
    ```

- substring() = substr() : 문자열 데이터의 일부분만 가져오는 함수
    ```
        # 책 제목을 10글자만 보여주려 한다
        # 제목 칼럼은 short title 이라고 하겠다
        # substring( 컬럼이름, 시작위치(1=첫번째), 길이(몇개가져올거냐) )
    select substring(title, 1, 10)
    from books;
    ```

- 제목 컬럼의 맨 뒤에서 7번째 글자부터 끝까지 가져오기
    ```
    select substr(title, -7)
    ```

# 오늘의 문제점 및 해결방안