# 8월 22일

## 팀 프로젝트 1

### 헬로 키즈 앱

#### 서버리스 앱 개발
- 공지사항 부분 개발



# 오류와 해결방법
#### 1. 자세한 상황 설명 :
- 플라스크를 이용하여 앱을 만들때 API를 다 만들고 포스트맨으로 테스트 하는데 자꾸 에러 메세지가 뜸.

    ```
    # 에러메세지
    flask Did not attempt to load JSON data because the request Content-Type was not 'application/json
    ```
- 원인 : 데이터를 받는 코드가 하부에 없었음에도 불구하고 데이터를 받아오라는 코드를 적어놨기때문에, 데이터가 없는데 보여달라고 할 때 뜨는 코드였음.
    ```
    class NoticeWillResource(Resource):

        @jwt_required()
        def post(self, classId):                   

            # 1. 클라이언트가 보낸 데이터를 받아온다. ###  --> 이 부분이 문제
            #data = request.get_json()
            #print('보내온데이터 확인', data)

            # 1-1. 헤더에 담긴 JWT 토큰을 받아온다.
            teacherId = get_jwt_identity()
            print('토큰확인', teacherId)
    
    ### 클라이언트가 보낸 데이터가 없는데 제이슨을 받아오라고 하니 나는 오류였음.
    ### 저 부분을 지우고 테스트하자 잘 작동됨
    ```

#### 2. 자세한 상황 설명 
- 선생님 계정으로 로그인하여 공지사항을 수정할 때 작성자의 정보를 가져와서 테이블에 저장을 해야 했음.
- 테이블에 저장을 할 때에는 선생님 계정의 id를 가져와서 저장을 해야 했으나, get jwt를 이용하여 작성자 정보를 가져왔을때 자꾸만 id 대신 닉네임을 가져옴.

- 원인 
  - 테이블의 id(프라이머리키)에 다른 이름을 적어놈.
    - 테이블을 조인했을때 어떤 테이블에서 온 id인지 쉽게 알 수 있도록 하기 위해 id앞에 테이블이름을 붙여서 만들어 놓았음.
- 해결
  - 일단 테이블의 프라이머리 키를 전부 그냥 'id'라고 바꿈
  - id라고 바꾼 뒤, 다시 선생님 계정으로 로그인 해 줌.
  - 다시 포스트맨으로 테스트 해 봄
  - --> id 가져오기 성공!

- 참고한 페이지 : https://jwt.io/

